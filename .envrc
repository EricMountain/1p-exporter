# direnv project environment for 1p-exporter
# - add `src/` to PYTHONPATH so `python -m onep_exporter` works from repo root
# - expose project virtualenv at `.venv` by adding its `bin/` to PATH
# After cloning: install direnv, add the shell hook, then run `direnv allow` in this directory.

# add project source to PYTHONPATH
export PYTHONPATH="$PWD/src${PYTHONPATH:+:}$PYTHONPATH"

# if a local .venv exists, expose it (don't run the activate script)
export VIRTUAL_ENV="$PWD/.venv"
if [ -d .venv ]; then
  if type PATH_add >/dev/null 2>&1; then
    PATH_add "$PWD/.venv/bin"
  else
    export PATH="$PWD/.venv/bin:$PATH"
  fi
else
  layout python3
fi
